<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Striplog for abstracting curves" href="10_Handling_curve_data.html" /><link rel="prev" title="Display objects" href="03_Display_objects.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-4.4.0, furo 2022.02.14.1"/>
        <title>Striplog expert functions - striplog documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=a8f031f701c6af50c9919b48f173a5785af06fac" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">striplog  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/striplog_logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="00_Read_me_first.html">Read me first!</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_Basics.html">Striplog basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_Basic_objects.html">Basic objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_Display_objects.html">Display objects</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Striplog expert functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Handling_curve_data.html">Striplog for abstracting curves</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Handling_curve_data.html#random-curve-data">Random curve data</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Handling_curve_data.html#extract-data-from-the-curve-into-the-striplog">Extract data from the curve into the striplog</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Handling_curve_data.html#extract-and-reduce-data">Extract and reduce data</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_Parsing_descriptions.html">Parsing a description into components</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_Moving_sand_proportion.html">Moving sand proportion with <code class="docutils literal notranslate"><span class="pre">striplog</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="13_Binary_morphologies.html">Binary morphologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_Merge.html">Striplog merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_Markov_chains.html">Markov chains with <code class="docutils literal notranslate"><span class="pre">striplog</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="16_Blocked_logs.html">Blocking curves with <code class="docutils literal notranslate"><span class="pre">welly</span></code> and <code class="docutils literal notranslate"><span class="pre">striplog</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/striplog.html">striplog package</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.canstrat.html">striplog.canstrat module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.canstrat_codes.html">striplog.canstrat_codes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.component.html">striplog.component module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.defaults.html">striplog.defaults module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.description.html">striplog.description module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.hatches.html">striplog.hatches module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.interval.html">striplog.interval module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.legend.html">striplog.legend module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.lexicon.html">striplog.lexicon module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.logo.html">striplog.logo module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.markov.html">striplog.markov module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.position.html">striplog.position module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.rock.html">striplog.rock module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.striplog.html">striplog.striplog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.templates.html">striplog.templates module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/striplog.utils.html">striplog.utils module</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/striplog/">PyPI releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/agile-geoscience/striplog">Code in GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/agile-geoscience/striplog/issues">Issue tracker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://code.agilescientific.com/community">Community guidelines</a></li>
<li class="toctree-l1"><a class="reference external" href="https://code.agilescientific.com">Agile's software</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.agilescientific.com">Agile's website</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="striplog-expert-functions">
<h1>Striplog expert functions<a class="headerlink" href="#striplog-expert-functions" title="Permalink to this headline">#</a></h1>
<p>This notebooks looks at the main <code class="docutils literal notranslate"><span class="pre">striplog</span></code> object. For the basic objects it depends on, see <a class="reference internal" href="02_Basic_objects.html"><span class="doc std std-doc">Basic objects</span></a>.</p>
<p>First, import anything we might need.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">striplog</span>
<span class="n">striplog</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'unknown'
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">striplog</span> <span class="kn">import</span> <span class="n">Legend</span><span class="p">,</span> <span class="n">Lexicon</span><span class="p">,</span> <span class="n">Interval</span><span class="p">,</span> <span class="n">Component</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">legend</span> <span class="o">=</span> <span class="n">Legend</span><span class="o">.</span><span class="n">builtin</span><span class="p">(</span><span class="s1">'NSDOE'</span><span class="p">)</span>
<span class="n">lexicon</span> <span class="o">=</span> <span class="n">Lexicon</span><span class="o">.</span><span class="n">default</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils"/>
<section id="making-a-striplog-from-a-png">
<h2>Making a <code class="docutils literal notranslate"><span class="pre">striplog</span></code> from a PNG<a class="headerlink" href="#making-a-striplog-from-a-png" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">striplog</span> <span class="kn">import</span> <span class="n">Striplog</span>
<span class="n">imgfile</span> <span class="o">=</span> <span class="s2">"M-MG-70_14.3_135.9.png"</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span> <span class="o">=</span> <span class="n">Striplog</span><span class="o">.</span><span class="n">from_img</span><span class="p">(</span><span class="n">imgfile</span><span class="p">,</span> <span class="mf">14.3</span><span class="p">,</span> <span class="mf">135.9</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">)</span>
<span class="n">strip</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.10.2/x64/lib/python3.10/site-packages/striplog/striplog.py:892: UserWarning: from_img() is deprecated; please use from_image()
  warnings.warn(w)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(26 Intervals, start=14.3, stop=135.9)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">ladder</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_8_0.png" src="../_images/04_Beyond_basics_8_0.png"/>
</div>
</div>
</section>
<hr class="docutils"/>
<section id="making-finding-and-annealing-gaps">
<h2>Making, finding and annealing gaps<a class="headerlink" href="#making-finding-and-annealing-gaps" title="Permalink to this headline">#</a></h2>
<p>This striplog doesn’t have any gaps…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find_gaps</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">"No gaps!"</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'No gaps!'
</pre></div>
</div>
</div>
</div>
<p>But we can make some by deleting indices:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">strip</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span>
<span class="n">strip</span><span class="o">.</span><span class="n">find_gaps</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(3 Intervals, start=54.81764705882354, stop=71.80588235294118)
</pre></div>
</div>
</div>
</div>
<p>We can also get a list of the indices of intervals that are followed by gaps (i.e. are directly above gaps in ‘depth’ order, or directly below gaps in ‘elevation’ order).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find_gaps</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 5, 9]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">thinnest</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>95.9</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>dolomite</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>0.38 m of dolomite</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table></table></div></td></tr><tr><td><strong>base</strong></td><td>96.2764705882353</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">thickest</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_17_0.png" src="../_images/04_Beyond_basics_17_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(23 Intervals, start=14.3, stop=135.9)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">prune</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_19_0.png" src="../_images/04_Beyond_basics_19_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">anneal</span><span class="p">()</span>
<span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_20_0.png" src="../_images/04_Beyond_basics_20_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find_gaps</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">"No gaps!"</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'No gaps!'
</pre></div>
</div>
</div>
</div>
</section>
<section id="label-the-intervals">
<h2>Label the intervals<a class="headerlink" href="#label-the-intervals" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">'lithology'</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_23_0.png" src="../_images/04_Beyond_basics_23_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">plot_tops</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">field</span><span class="o">=</span><span class="s1">'lithology'</span><span class="p">,</span> <span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">'off'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_24_0.png" src="../_images/04_Beyond_basics_24_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>14.3</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>anhydrite</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>36.94 m of anhydrite</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table></table></div></td></tr><tr><td><strong>base</strong></td><td>51.24117647058824</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">round</span><span class="p">(</span><span class="mf">3.1415936</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.14
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="k">for</span> <span class="n">iv</span> <span class="ow">in</span> <span class="n">strip</span><span class="p">:</span>
    <span class="n">iv</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">'por'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    
<span class="n">strip</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>14.3</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>anhydrite</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>36.94 m of anhydrite</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>por</strong></td><td>0.063</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>51.24117647058824</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">'field'</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">'por'</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_28_0.png" src="../_images/04_Beyond_basics_28_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">middle</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>32.77058823529412
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">primary</span><span class="p">[</span><span class="s1">'lithology'</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'anhydrite'
</pre></div>
</div>
</div>
</div>
<section id="other-types-of-anneal">
<h3>Other types of anneal<a class="headerlink" href="#other-types-of-anneal" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">strip</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_33_0.png" src="../_images/04_Beyond_basics_33_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default behaviour: meet in middle.</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">s</span><span class="o">.</span><span class="n">anneal</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'middle'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_34_0.png" src="../_images/04_Beyond_basics_34_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">s</span><span class="o">.</span><span class="n">anneal</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'up'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_35_0.png" src="../_images/04_Beyond_basics_35_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">s</span><span class="o">.</span><span class="n">anneal</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">'down'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_36_0.png" src="../_images/04_Beyond_basics_36_0.png"/>
</div>
</div>
</section>
</section>
<hr class="docutils"/>
<section id="overlapping-intervals">
<h2>Overlapping intervals<a class="headerlink" href="#overlapping-intervals" title="Permalink to this headline">#</a></h2>
<p>If there are overlapping intervals in a striplog, you can find them with <code class="docutils literal notranslate"><span class="pre">find_overlaps()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span> <span class="o">=</span> <span class="n">Striplog</span><span class="p">([</span><span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'dolomite'</span><span class="p">}),]}),</span>
                  <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">55</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'limestone'</span><span class="p">}),]}),</span>
                  <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'volcanic'</span><span class="p">}),]}),</span> 
                  <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">78</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'anhydrite'</span><span class="p">}),]})</span>
                  <span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">find_overlaps</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 2]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">overlaps</span> <span class="o">=</span> <span class="n">lappy</span><span class="o">.</span><span class="n">find_overlaps</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax0</span><span class="p">,</span> <span class="n">ax1</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># Use alpha to highlight overlaps.</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">lappy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">overlaps</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'lappy'</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'overlaps'</span><span class="p">)</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_40_0.png" src="../_images/04_Beyond_basics_40_0.png"/>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">merge_overlaps()</span></code> method operates in place and returns nothing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">merge_overlaps</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now there are no overlaps!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">find_overlaps</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">'k'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_45_0.png" src="../_images/04_Beyond_basics_45_0.png"/>
</div>
</div>
<p>The merged intervals have mixed components:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">components</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[Component({'lithology': 'dolomite'}), Component({'lithology': 'limestone'})]
</pre></div>
</div>
</div>
</div>
<p>Note that the description is rather garbled.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">description</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'66.7% 20.00 m of limestone with 33.3% 10.00 m of dolomite'
</pre></div>
</div>
</div>
</div>
</section>
<section id="merge">
<h2>Merge<a class="headerlink" href="#merge" title="Permalink to this headline">#</a></h2>
<p>New way to merge. Uses precendence to decide what to take in each merge zone.</p>
<p><strong>Note, does not combine the components in a merge zone. You have to choose one or the other.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span> <span class="o">=</span> <span class="n">Striplog</span><span class="p">([</span><span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'dolomite'</span><span class="p">}),]}),</span>
                  <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">55</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'limestone'</span><span class="p">}),]}),</span>
                  <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'volcanic'</span><span class="p">}),]}),</span> 
                  <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">78</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'anhydrite'</span><span class="p">}),]})</span>
                  <span class="p">])</span>

<span class="n">lappy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_51_0.png" src="../_images/04_Beyond_basics_51_0.png"/>
</div>
</div>
<p>You have to provide an <code class="docutils literal notranslate"><span class="pre">Interval</span></code> attribute (like ‘top’, ‘base’, or ‘thickness’) <strong>or</strong> a component attribute to merge on (if you use a component attribute, <code class="docutils literal notranslate"><span class="pre">merge</span></code> gets this attribute from the primary component to decide what to keep in each zone). The attribute must suport ordering — <code class="docutils literal notranslate"><span class="pre">striplog</span></code> keeps the thing with the larger value (or the thing which comes last in the ordering), e.g. the thickest, deepest, etc. If you want the reverse behaviour (keep the thinnest, shallowest, etc, then pass the <code class="docutils literal notranslate"><span class="pre">reverse=True</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_53_0.png" src="../_images/04_Beyond_basics_53_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="s1">'top'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_54_0.png" src="../_images/04_Beyond_basics_54_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="s1">'top'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">z</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>55.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lappy</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="s1">'top'</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">z</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>60.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lappy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">lappy</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="s1">'top'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_57_0.png" src="../_images/04_Beyond_basics_57_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lappy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">lappy</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="s1">'top'</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_58_0.png" src="../_images/04_Beyond_basics_58_0.png"/>
</div>
</div>
<p>It is not currently possible to blend or combine units in the merge zones; you have to choose one.</p>
</section>
<hr class="docutils"/>
<section id="querying-the-striplog">
<h2>Querying the striplog<a class="headerlink" href="#querying-the-striplog" title="Permalink to this headline">#</a></h2>
<p>This results in a new Striplog, contianing only the intervals requested.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(4 Intervals, start=51.24117647058824, stop=81.78235294117647)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(Component({'lithology': 'sandstone', 'colour': 'grey', 'grainsize': 'vf-f'}),
  22.423529411764697)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span><span class="o">.</span><span class="n">cum</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>22.423529411764697
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_65_0.png" src="../_images/04_Beyond_basics_65_0.png"/>
</div>
</div>
<p>Let’s ask for the rock we just found by seaching.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rock</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">rock</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>sandstone</td></tr><tr><td><strong>colour</strong></td><td>grey</td></tr><tr><td><strong>grainsize</strong></td><td>vf-f</td></tr></table></div></div></div>
</div>
<p>We can also search for a rock…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">rock</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_69_0.png" src="../_images/04_Beyond_basics_69_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rock</span> <span class="ow">in</span> <span class="n">strip</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>And we can ask what is at a particular depth.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">read_at</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span><span class="o">.</span><span class="n">primary</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>siltstone</td></tr><tr><td><strong>colour</strong></td><td>grey</td></tr></table></div></div></div>
</div>
</section>
<hr class="docutils"/>
<section id="combining-striplogs-with-binary-operations">
<h2>Combining striplogs with binary operations<a class="headerlink" href="#combining-striplogs-with-binary-operations" title="Permalink to this headline">#</a></h2>
<p>We’d like to operate on the pairs of striplogs, finding overlaps and their intersections.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">chrono</span> <span class="o">=</span> <span class="n">Striplog</span><span class="p">([</span><span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="s1">'base'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'age'</span><span class="p">:</span> <span class="s1">'Holocene'</span><span class="p">})]}),</span>
                   <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'age'</span><span class="p">:</span> <span class="s1">'Palaeogene'</span><span class="p">})]}),</span>
                   <span class="n">Interval</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'top'</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="s1">'base'</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">'components'</span><span class="p">:[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'age'</span><span class="p">:</span> <span class="s1">'Cretaceous'</span><span class="p">})]}),</span> 
                   <span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time</span> <span class="o">=</span> <span class="n">Legend</span><span class="o">.</span><span class="n">default_timescale</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td><strong>colour</strong></td><td style="color:#000000; background-color:#fef691">#fef691</td></tr><tr><td><strong>width</strong></td><td style="color:black; background-color:white">None</td></tr><tr><td><strong>component</strong></td><td style="color:black; background-color:white"><div class="table-wrapper"><table><tr><td><strong>age</strong></td><td>quaternary</td></tr></table></div></td></tr><tr><td><strong>hatch</strong></td><td style="color:black; background-color:white">None</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">chrono</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_77_0.png" src="../_images/04_Beyond_basics_77_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sands</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span>
<span class="n">cretaceous</span> <span class="o">=</span> <span class="n">chrono</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'Palaeogene'</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax0</span><span class="p">,</span> <span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">sands</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax0</span><span class="p">)</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">chrono</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">sands</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">cretaceous</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Sands'</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Chrono'</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Tert. sands'</span><span class="p">)</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_78_0.png" src="../_images/04_Beyond_basics_78_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sands</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">chrono</span><span class="o">.</span><span class="n">read_at</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
    <span class="n">i</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'age'</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">primary</span><span class="p">[</span><span class="s1">'age'</span><span class="p">]}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sands</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>60.95882352941177</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>sandstone</td></tr><tr><td><strong>colour</strong></td><td>grey</td></tr><tr><td><strong>grainsize</strong></td><td>vf-f</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>2.96 m of sandstone, grey, vf-f</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>age</strong></td><td>Palaeogene</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>63.92352941176471</td></tr></table></div></div></div>
</div>
</section>
<hr class="docutils"/>
<section id="map-reduce-filter">
<h2>Map, reduce, filter<a class="headerlink" href="#map-reduce-filter" title="Permalink to this headline">#</a></h2>
<p>Striplogs are just lists of <code class="docutils literal notranslate"><span class="pre">Intervals</span></code>, so you can use Python’s functional programming patterns on them quite easily. For example, you can map functions and lambdas onto striplogs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tops_in_feet</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">z</span><span class="o">/</span><span class="mf">0.3048</span><span class="p">,</span> <span class="n">strip</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">tops_in_feet</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>  <span class="c1"># First 5 only</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[46.91601049868766,
 168.11409603211365,
 182.70418403581905,
 193.12567546703724,
 199.9961401883588]
</pre></div>
</div>
</div>
</div>
<p>Don’t forget the humble list comprehension though…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">thickness</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">strip</span><span class="p">][:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[36.941176470588246,
 4.44705882352941,
 3.176470588235297,
 2.094117647058816,
 2.964705882352945]
</pre></div>
</div>
</div>
</div>
<p>Add all the thicknesses of intervals with a top depth &gt; 100 m:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="k">def</span> <span class="nf">sumr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">reduce</span><span class="p">(</span><span class="n">sumr</span><span class="p">,</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">thickness</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">strip</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">z</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>31.341176470588238
</pre></div>
</div>
</div>
</div>
<p>To go even further, let’s add a porosity array to each interval’s primary component:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="k">for</span> <span class="n">iv</span> <span class="ow">in</span> <span class="n">strip</span><span class="p">:</span>
    <span class="n">iv</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">'porosity'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>
<span class="n">strip</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>60.95882352941177</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>sandstone</td></tr><tr><td><strong>colour</strong></td><td>grey</td></tr><tr><td><strong>grainsize</strong></td><td>vf-f</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>2.96 m of sandstone, grey, vf-f</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>por</strong></td><td>0.233</td></tr><tr><td><strong>porosity</strong></td><td>[0.1107259  0.16367082 0.21743196]</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>63.92352941176471</td></tr></table></div></div></div>
</div>
<p>We can also write a function that returns <code class="docutils literal notranslate"><span class="pre">True</span></code> for some condition, and then <code class="docutils literal notranslate"><span class="pre">filter</span></code> intervals on that condition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">porous</span><span class="p">(</span><span class="n">component</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">component</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">'porosity'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.15</span>
    
<span class="n">Striplog</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">porous</span><span class="p">,</span> <span class="n">strip</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(7 Intervals, start=51.24117647058824, stop=131.47647058823532)
</pre></div>
</div>
</div>
</div>
<p>It’s a bit clunky now that <code class="docutils literal notranslate"><span class="pre">filter</span></code> returns an iterator. But it’s also clunky because you can’t pass arguments to the function you’re giving <code class="docutils literal notranslate"><span class="pre">filter</span></code> — so you can’t set the porosity to compare against when you call it, you have to edit the function itself.</p>
<p>To pass another argument to the filter function, you’ll have to use a closure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min_porosity</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="n">component</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">component</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">'porosity'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">compare</span>

<span class="n">Striplog</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">min_porosity</span><span class="p">(</span><span class="mf">0.15</span><span class="p">),</span> <span class="n">strip</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(7 Intervals, start=51.24117647058824, stop=131.47647058823532)
</pre></div>
</div>
</div>
</div>
<hr/>
</section>
<section id="logs-from-striplogs">
<h2>Logs from striplogs<a class="headerlink" href="#logs-from-striplogs" title="Permalink to this headline">#</a></h2>
<p>The default behaviour is to assign the integer values in order of abundance of each primary component, starting with 1, and leaving 0 for ‘unassigned’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">liths</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">to_log</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">liths</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_95_0.png" src="../_images/04_Beyond_basics_95_0.png"/>
</div>
</div>
<p>Pass a legend to get the ordering from the legend (‘1’ is given to the first component in the legend, ‘2’ to the next, and so on).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">liths</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">to_log</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">liths</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_97_0.png" src="../_images/04_Beyond_basics_97_0.png"/>
</div>
</div>
<p>Recall that we added porosity to the components in this striplog:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>60.95882352941177</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>sandstone</td></tr><tr><td><strong>colour</strong></td><td>grey</td></tr><tr><td><strong>grainsize</strong></td><td>vf-f</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>2.96 m of sandstone, grey, vf-f</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>por</strong></td><td>0.233</td></tr><tr><td><strong>porosity</strong></td><td>[0.1107259  0.16367082 0.21743196]</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>63.92352941176471</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># I have broken this.</span>
<span class="c1"># por = strip.to_log(field='porosity', field_function=np.mean)</span>
<span class="c1"># plt.plot(por)</span>
<span class="c1"># plt.show()</span>
</pre></div>
</div>
</div>
</div>
<p>We can also export any value corresponding to components from the legend, for example a ‘width’ log:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">w</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">table</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">to_log</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">legend_field</span><span class="o">=</span><span class="s1">'width'</span><span class="p">,</span> <span class="n">return_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">w</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([2., 2., 2., ..., 2., 2., 2.])
</pre></div>
</div>
</div>
</div>
<p>…and we can make a composite plot in <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">width</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">plot_axis</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">default_width</span><span class="o">=</span><span class="n">width</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'white'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_betweenx</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">width</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">'white'</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">strip</span><span class="o">.</span><span class="n">stop</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">strip</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">z</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_104_0.png" src="../_images/04_Beyond_basics_104_0.png"/>
</div>
</div>
</section>
<hr class="docutils"/>
<section id="filtering-an-array-with-a-striplog">
<h2>Filtering an array with a striplog<a class="headerlink" href="#filtering-an-array-with-a-striplog" title="Permalink to this headline">#</a></h2>
<p>I’d like to ‘extract’ the data from a log, only where there are intervals. Since we already have ways to filter the striplog to zones of interest (e.g. with <code class="docutils literal notranslate"><span class="pre">find()</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code>) it would be easy to, say, get the GR curve where the striplog indicates sandstone.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lasio</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">lasio</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">"P-129_out.LAS"</span><span class="p">)</span>
<span class="n">z</span><span class="p">,</span> <span class="n">gr</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="s1">'DEPT'</span><span class="p">],</span> <span class="n">l</span><span class="p">[</span><span class="s1">'GR'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># There are actually 4 intervals here; 2 are touching</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_107_0.png" src="../_images/04_Beyond_basics_107_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sand</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span><span class="o">.</span><span class="n">to_flag</span><span class="p">(</span><span class="n">basis</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
<span class="n">gr</span><span class="p">[</span><span class="n">sand</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>70.63407979326
</pre></div>
</div>
</div>
</div>
<p>Which is just a convenience; it does the same as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sand</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'sandstone'</span><span class="p">)</span><span class="o">.</span><span class="n">to_log</span><span class="p">(</span><span class="n">basis</span><span class="o">=</span><span class="n">z</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">gr</span><span class="p">[</span><span class="n">sand</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>70.63407979326
</pre></div>
</div>
</div>
</div>
<p>Do we need to make this easier?</p>
<hr/>
</section>
<section id="reversing-a-striplog">
<h2>Reversing a striplog<a class="headerlink" href="#reversing-a-striplog" title="Permalink to this headline">#</a></h2>
<p>You can transform a striplog from ‘depth’ order to ‘elevation’ order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_113_0.png" src="../_images/04_Beyond_basics_113_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>131.47647058823532</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>volcanic</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>4.42 m of volcanic</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>por</strong></td><td>0.004</td></tr><tr><td><strong>porosity</strong></td><td>[0.21375421 0.01895106 0.14521745]</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>135.9</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s3</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_116_0.png" src="../_images/04_Beyond_basics_116_0.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>135.9</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>volcanic</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>4.42 m of volcanic</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>por</strong></td><td>0.004</td></tr><tr><td><strong>porosity</strong></td><td>[0.21375421 0.01895106 0.14521745]</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>131.47647058823532</td></tr></table></div></div></div>
</div>
</section>
<hr class="docutils"/>
<section id="outcrop">
<h2>Outcrop<a class="headerlink" href="#outcrop" title="Permalink to this headline">#</a></h2>
<p>Tell the CSV loader the columns:</p>
<ol class="simple">
<li><p>base</p></li>
<li><p>top</p></li>
<li><p>description</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="s2">"""base,top,description</span>
<span class="s2">101,120,Till</span>
<span class="s2">100,101,Gypsum</span>
<span class="s2">50,100,Limestone Formation</span>
<span class="s2">28,50,Shale Formation</span>
<span class="s2">13,28,Granite Wash</span>
<span class="s2">0,13,Basement"""</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log</span> <span class="o">=</span> <span class="n">Striplog</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">l</span><span class="p">,</span> <span class="n">lexicon</span><span class="o">=</span><span class="n">Lexicon</span><span class="o">.</span><span class="n">default</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="o">.</span><span class="n">read_at</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>50.0</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>shale</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>22.00 m of shale</td></tr><tr><td><strong>description</strong></td><td>Shale Formation</td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table></table></div></td></tr><tr><td><strong>base</strong></td><td>28.0</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="o">.</span><span class="n">order</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'elevation'
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aspect</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_123_0.png" src="../_images/04_Beyond_basics_123_0.png"/>
</div>
</div>
</section>
<hr class="docutils"/>
<section id="handling-tops">
<h2>Handling tops<a class="headerlink" href="#handling-tops" title="Permalink to this headline">#</a></h2>
<p>I recommend treating tops as intervals, not as point data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tops_csv</span> <span class="o">=</span> <span class="s2">"""top,formation</span>
<span class="s2">100, Escanilla Fm.</span>
<span class="s2">200, Sobrarbe Fm. </span>
<span class="s2">350, San Vicente Fm.</span>
<span class="s2">500, Cretaceous</span>
<span class="s2">"""</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tops</span> <span class="o">=</span> <span class="n">Striplog</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">tops_csv</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tops</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{'top': Position({'middle': 100.0, 'units': 'm'}), 'base': Position({'middle': 200.0, 'units': 'm'}), 'description': '', 'data': {'formation': 'Escanilla Fm.'}, 'components': []}
{'top': Position({'middle': 200.0, 'units': 'm'}), 'base': Position({'middle': 350.0, 'units': 'm'}), 'description': '', 'data': {'formation': 'Sobrarbe Fm.'}, 'components': []}
{'top': Position({'middle': 350.0, 'units': 'm'}), 'base': Position({'middle': 500.0, 'units': 'm'}), 'description': '', 'data': {'formation': 'San Vicente Fm.'}, 'components': []}
{'top': Position({'middle': 500.0, 'units': 'm'}), 'base': Position({'middle': 501.0, 'units': 'm'}), 'description': '', 'data': {'formation': 'Cretaceous'}, 'components': []}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tops</span><span class="o">.</span><span class="n">read_at</span><span class="p">(</span><span class="mf">254.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>200.0</td></tr><tr><td><strong>primary</strong></td><td>None</td></tr><tr><td><strong>summary</strong></td><td>None</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>formation</strong></td><td>Sobrarbe Fm.</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>350.0</td></tr></table></div></div></div>
</div>
</section>
<hr class="docutils"/>
<section id="handling-point-data">
<h2>Handling point data<a class="headerlink" href="#handling-point-data" title="Permalink to this headline">#</a></h2>
<p>Some things really are point data. Sort of like a log, but irregular, more discrete. Here are some lab measurements…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_csv</span> <span class="o">=</span> <span class="s2">"""depth, bodacity</span>
<span class="s2">1200, 6.4</span>
<span class="s2">1205, 7.3</span>
<span class="s2">1210, 8.2</span>
<span class="s2">1250, 9.2</span>
<span class="s2">1275, 4.3</span>
<span class="s2">1300, 2.2</span>
<span class="s2">"""</span>
</pre></div>
</div>
</div>
</div>
<p>You must specify <code class="docutils literal notranslate"><span class="pre">points=True</span></code> otherwise Striplog will ‘fill in’ and create the bases for you, based on the next top.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">points</span> <span class="o">=</span> <span class="n">Striplog</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">data_csv</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{'top': Position({'middle': 1200.0, 'units': 'm'}), 'base': Position({'middle': 1200.0, 'units': 'm'}), 'description': '', 'data': {'bodacity': 6.4}, 'components': []}
{'top': Position({'middle': 1205.0, 'units': 'm'}), 'base': Position({'middle': 1205.0, 'units': 'm'}), 'description': '', 'data': {'bodacity': 7.3}, 'components': []}
{'top': Position({'middle': 1210.0, 'units': 'm'}), 'base': Position({'middle': 1210.0, 'units': 'm'}), 'description': '', 'data': {'bodacity': 8.2}, 'components': []}
{'top': Position({'middle': 1250.0, 'units': 'm'}), 'base': Position({'middle': 1250.0, 'units': 'm'}), 'description': '', 'data': {'bodacity': 9.2}, 'components': []}
{'top': Position({'middle': 1275.0, 'units': 'm'}), 'base': Position({'middle': 1275.0, 'units': 'm'}), 'description': '', 'data': {'bodacity': 4.3}, 'components': []}
{'top': Position({'middle': 1300.0, 'units': 'm'}), 'base': Position({'middle': 1300.0, 'units': 'm'}), 'description': '', 'data': {'bodacity': 2.2}, 'components': []}
</pre></div>
</div>
</div>
</div>
<p>One day, when we have a use case, we can do something nice with this, like treat it as numerical data, and make a plot for it. We need an elegant way to get that number into a ‘rock’, like {‘x’: 6.4}, etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">points</span><span class="o">.</span><span class="n">order</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'none'
</pre></div>
</div>
</div>
</div>
<hr/>
</section>
<section id="striplogs-from-logs">
<h2>Striplogs from logs<a class="headerlink" href="#striplogs-from-logs" title="Permalink to this headline">#</a></h2>
<p>We can read a log from an LAS file with <code class="docutils literal notranslate"><span class="pre">lasio</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lasio</span>
</pre></div>
</div>
</div>
</div>
<p>Read a gamma-ray log.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="n">lasio</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">"P-129_out.LAS"</span><span class="p">)</span>
<span class="n">z</span><span class="p">,</span> <span class="n">gr</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="s1">'DEPT'</span><span class="p">],</span> <span class="n">l</span><span class="p">[</span><span class="s1">'GR'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">[</span><span class="o">-</span><span class="mi">2000</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1634.49
</pre></div>
</div>
</div>
</div>
<p>Next we make a list of components to pass into the new striplog. The order must match the values you pass in the <code class="docutils literal notranslate"><span class="pre">to_log()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comps</span> <span class="o">=</span> <span class="p">[</span><span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'sandstone'</span><span class="p">}),</span>
         <span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'greywacke'</span><span class="p">}),</span>
         <span class="n">Component</span><span class="p">({</span><span class="s1">'lithology'</span><span class="p">:</span> <span class="s1">'shale'</span><span class="p">}),</span> <span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Make a striplog from the GR curve, using the cutoffs given as <code class="docutils literal notranslate"><span class="pre">cutoff</span> <span class="pre">=</span> <span class="pre">[10,</span> <span class="pre">50]</span></code>. These cutoffs define 3 lithologies, whichi is what we’re passing in as <code class="docutils literal notranslate"><span class="pre">comps</span></code>. There must be enough components for the intervals you’re defining.</p>
<p>If you don’t provide <code class="docutils literal notranslate"><span class="pre">components</span></code>, you can provide <code class="docutils literal notranslate"><span class="pre">legend</span></code> instead; the components will be drawn from that. If you pass ‘too many’ components, they will be used in order and the ‘extra’ ones ignored.</p>
<p>You have to pass in the depth/elevation basis as well, because no assumptions are made about the log’s extent.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Striplog</span><span class="o">.</span><span class="n">from_log</span><span class="p">(</span><span class="n">gr</span><span class="p">,</span> <span class="n">cutoff</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="n">components</span><span class="o">=</span><span class="n">comps</span><span class="p">,</span> <span class="n">basis</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
<span class="n">s</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(472 Intervals, start=1.0668, stop=1939.1376)
</pre></div>
</div>
</div>
</div>
<p>Now we can, say, remove the thin beds:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">prune</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">anneal</span><span class="p">()</span>
<span class="n">s</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(472 Intervals, start=1.0668, stop=1939.1376)
</pre></div>
</div>
</div>
</div>
<p>And then read the log back into the intervals, ‘reducing’ with a function if we want:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">gr</span><span class="p">[</span><span class="mi">2000</span><span class="p">:</span><span class="o">-</span><span class="mi">2000</span><span class="p">],</span> <span class="n">basis</span><span class="o">=</span><span class="n">z</span><span class="p">[</span><span class="mi">2000</span><span class="p">:</span><span class="o">-</span><span class="mi">2000</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'GR'</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(472 Intervals, start=1.0668, stop=1939.1376)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>113.6904</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>greywacke</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>0.15 m of greywacke</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table></table></div></td></tr><tr><td><strong>base</strong></td><td>113.8428</td></tr></table></div></div></div>
</div>
<p>Now close the loop by exporting these values as a new log and comparing to the original. Since we reduced with <code class="docutils literal notranslate"><span class="pre">np.mean</span></code>, we will get a blocked log…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="p">,</span> <span class="n">gz</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">to_log</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">"GR"</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span> <span class="n">return_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g2</span><span class="p">,</span> <span class="n">gz2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">to_log</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">"GR"</span><span class="p">,</span> <span class="n">return_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">gr</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'lightblue'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gz</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">gz2</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_156_0.png" src="../_images/04_Beyond_basics_156_0.png"/>
</div>
</div>
</section>
<section id="another-log-to-striplog">
<h2>Another log to striplog<a class="headerlink" href="#another-log-to-striplog" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Striplog</span><span class="o">.</span><span class="n">from_log</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="n">basis</span><span class="o">=</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>110.20408163265306</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>volcanic</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>2.04 m of volcanic</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table></table></div></td></tr><tr><td><strong>base</strong></td><td>112.24489795918367</td></tr></table></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax0</span><span class="p">,</span> <span class="n">ax1</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>

<span class="c1"># Use alpha to highlight overlaps.</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax0</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="s1">'o-'</span><span class="p">)</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Striplog'</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Log'</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_162_0.png" src="../_images/04_Beyond_basics_162_0.png"/>
</div>
</div>
<hr/>
</section>
<section id="histogram">
<h2>Histogram<a class="headerlink" href="#histogram" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=-</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">'left'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_164_0.png" src="../_images/04_Beyond_basics_164_0.png"/>
</div>
</div>
<hr/>
</section>
<section id="crop-a-striplog">
<h2>Crop a striplog<a class="headerlink" href="#crop-a-striplog" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Striplog(13 Intervals, start=20.0, stop=100.0)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>  <span class="c1"># in place</span>
<span class="n">strip</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div class="table-wrapper"><table><tr><td rowspan="6" style="width:2em; background-color:#DDDDDD"></td><td><strong>top</strong></td><td>20.0</td></tr><tr><td><strong>primary</strong></td><td><div class="table-wrapper"><table><tr><td><strong>lithology</strong></td><td>anhydrite</td></tr></table></div></td></tr><tr><td><strong>summary</strong></td><td>31.24 m of anhydrite</td></tr><tr><td><strong>description</strong></td><td></td></tr><tr><td><strong>data</strong></td><td><div class="table-wrapper"><table><tr><td><strong>por</strong></td><td>0.063</td></tr><tr><td><strong>porosity</strong></td><td>[0.01684561 0.21347711 0.03248973]</td></tr></table></div></td></tr><tr><td><strong>base</strong></td><td>51.24117647058824</td></tr></table></div></div></div>
</div>
<p><strong>Limitation</strong> — right now you cannot ‘crop’ to an extent larger than the current striplog. Maybe we should allow that, with padding…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">strip</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>

<span class="c1"># This should result in an error:</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Input</span> <span class="n">In</span> <span class="p">[</span><span class="mi">111</span><span class="p">],</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">strip</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.10.2/x64/lib/python3.10/site-packages/striplog/striplog.py:2371,</span> in <span class="ni">Striplog.crop</span><span class="nt">(self, extent, copy)</span>
<span class="g g-Whitespace">   </span><span class="mi">2368</span> <span class="n">first_ix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_at</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2369</span> <span class="n">last_ix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_at</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">2371</span> <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">first_ix</span><span class="p">]</span><span class="o">.</span><span class="n">split_at</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">2372</span> <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">last_ix</span><span class="p">]</span><span class="o">.</span><span class="n">split_at</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">2374</span> <span class="n">new_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">[</span><span class="n">first_ix</span><span class="p">:</span><span class="n">last_ix</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.10.2/x64/lib/python3.10/site-packages/striplog/striplog.py:137,</span> in <span class="ni">Striplog.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">    </span><span class="mi">135</span>         <span class="k">return</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">137</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

<span class="ne">TypeError</span>: list indices must be integers or slices, not NoneType
</pre></div>
</div>
</div>
</div>
<hr/>
</section>
<section id="graphical-output-formats">
<h2>Graphical output formats<a class="headerlink" href="#graphical-output-formats" title="Permalink to this headline">#</a></h2>
<p>You should be able to natively save any format. If <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> complains, try replacing your usual import with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
</pre></div>
</div>
<p>Or in Jupyter Notebook…</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%matplotlib Agg
</pre></div>
</div>
<p>Then carry on as normal.</p>
<p>You need the figure object to save the striplog plot, so set <code class="docutils literal notranslate"><span class="pre">return_fig</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">strip</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">return_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">'test.pdf'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">'test.svg'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/04_Beyond_basics_171_0.png" src="../_images/04_Beyond_basics_171_0.png"/>
</div>
</div>
<p>To find out which backend you are using:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>'module://ipykernel.pylab.backend_inline'
</pre></div>
</div>
</div>
</div>
<hr/>
<p style="color:gray">©2015 Agile Geoscience. Licensed CC-BY. <a href="https://github.com/agile-geoscience/striplog">striplog.py</a></p></section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="10_Handling_curve_data.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Striplog for abstracting curves</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="03_Display_objects.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Display objects</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, The Striplog Authors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Striplog expert functions</a><ul>
<li><a class="reference internal" href="#making-a-striplog-from-a-png">Making a <code class="docutils literal notranslate"><span class="pre">striplog</span></code> from a PNG</a></li>
<li><a class="reference internal" href="#making-finding-and-annealing-gaps">Making, finding and annealing gaps</a></li>
<li><a class="reference internal" href="#label-the-intervals">Label the intervals</a><ul>
<li><a class="reference internal" href="#other-types-of-anneal">Other types of anneal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overlapping-intervals">Overlapping intervals</a></li>
<li><a class="reference internal" href="#merge">Merge</a></li>
<li><a class="reference internal" href="#querying-the-striplog">Querying the striplog</a></li>
<li><a class="reference internal" href="#combining-striplogs-with-binary-operations">Combining striplogs with binary operations</a></li>
<li><a class="reference internal" href="#map-reduce-filter">Map, reduce, filter</a></li>
<li><a class="reference internal" href="#logs-from-striplogs">Logs from striplogs</a></li>
<li><a class="reference internal" href="#filtering-an-array-with-a-striplog">Filtering an array with a striplog</a></li>
<li><a class="reference internal" href="#reversing-a-striplog">Reversing a striplog</a></li>
<li><a class="reference internal" href="#outcrop">Outcrop</a></li>
<li><a class="reference internal" href="#handling-tops">Handling tops</a></li>
<li><a class="reference internal" href="#handling-point-data">Handling point data</a></li>
<li><a class="reference internal" href="#striplogs-from-logs">Striplogs from logs</a></li>
<li><a class="reference internal" href="#another-log-to-striplog">Another log to striplog</a></li>
<li><a class="reference internal" href="#histogram">Histogram</a></li>
<li><a class="reference internal" href="#crop-a-striplog">Crop a striplog</a></li>
<li><a class="reference internal" href="#graphical-output-formats">Graphical output formats</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    </body>
</html>